建兴五年三月，诸葛亮率三十万大军出师伐魏。此时马超病故，五虎上将只余赵云一人。

	 

	诸葛亮升帐，调兵遣将已毕，忽听帐下一老将厉声道：“我虽年迈，尚有廉颇之勇，丞相何故不用我？”众人看时原来是赵云。诸葛亮道：“马孟起病故，我就像失了一条臂膀。今老将军年事已高，倘若稍有差错，怕会动摇了一世英名……”赵云再三请缨，道：“如不教我为先锋，就撞死在阶下！”诸葛亮苦劝不住，只得命赵云为前部先锋，又派邓芝助他。

	 

	魏主曹叡得报大惊，夏侯渊之子夏侯楙此时请命出征。原来夏侯楙年少气盛，虽然身为驸马，掌握兵权，地位尊贵，却未经战阵。当时请战，曹叡即命为大都督，韩德为先锋，率关西兵二十万来敌诸葛亮。司徒王朗阻谏，反遭夏侯楙斥责。

	 

	魏先锋韩德乃是西凉大将，善使开山大斧，有万夫不当之勇。韩德有四子，皆武艺精通。双方在凤鸣山对阵，韩德破口大骂，赵云挺枪纵马，直取韩德。韩德长子跃马来战，不到三合，被赵云一枪刺于马下。其余三子见了，齐来围攻赵云，赵云老当益壮，威风不减当年，连杀韩德四子，魏军大乱，韩德弃甲步行而逃。西凉兵素知赵云大名，见他英勇如昔，无人敢敌。赵云所到之处，如入无人之境。

	 

	夏侯楙得知韩德战败，自己领军来战赵云。韩德欲报杀子之仇，纵马抡开山大斧来战赵云。赵云挺枪来迎，不到三合，一枪刺韩德于马下，然后拨马直取夏侯楙。夏侯楙慌忙闪入本阵，邓芝乘势驱兵掩杀，魏兵大败一阵。夏侯楙连夜与众将商议设伏，次日再战，赵云深入重地，魏阵中八员将一齐来战。夏侯楙在山上指挥三军，赵云投东则指东，赵云投西则指西。赵云从早杀到晚，不能突围。四面军马渐渐逼近。赵云仰天叹道：“我不服老，要死在此地了。”

	 

	忽听东北角上喊声大震，魏兵纷纷逃窜，一彪军马杀到。为首大将持丈八蛇矛，马项下挂着一颗人头，正是张飞之子张苞。张苞见了赵云，道奉丞相之命恐老将军有失，特来相助。赵云大喜，话音刚落，关兴提青龙偃月刀，手挽一颗人头也领军杀到。赵云道：“二将军已建奇功，何不一鼓作气擒住夏侯楙？”二将闻言，领兵向前。赵云回顾左右道：“他们两个是我子侄辈，尚且争先立功；我乃国家上将，朝廷老臣，如何不如晚辈？我当舍老命以报答先帝之恩！”于是引军来捉夏侯楙。

	 

	当夜三路军夹攻，大破魏兵一阵，杀得尸横遍野，血流成河。夏侯楙年幼无谋，未经战阵，不知所措，引着帐下百余人投南安去了。魏兵见没了主帅，都溃散逃窜。赵云等于是围了南安，日夜攻打。

	 

	诸葛亮大军随后开到。诸葛亮设计，让人假扮夏侯楙部下，前往安定求救。安定太守崔谅听说夏侯楙被困，不敢不救，遂起兵来南安。路上被关兴、张苞前后夹击，大杀一阵。崔谅退回安定，城池已被魏延夺了。崔谅走投无路，不得已假意投降诸葛亮。崔谅假意去南安招降太守杨陵，与杨陵设计引诸葛亮进城。诸葛亮早已识破，就将计就计派关兴与崔谅进城。等开了城门，关兴一刀斩了杨陵。崔谅要逃，被张苞一枪刺于马下。于是攻克安定、南安两郡，擒了夏侯楙。

	 

	诸葛亮同样派人假冒夏侯楙部下去天水求救。天水郡太守马遵得讯正要起兵，忽然有人从外面进来道：“太守中诸葛亮之计了！”此人姓姜名维，字伯约，自幼博览群书，兵法武艺，无所不通。当日姜维对马遵道：“诸葛亮杀败夏侯楙，围住南安水泄不通，如何能有人突出重围？况且来人从未曾见过，又无公文，此人必然是要引太守出城，然后乘虚取天水！”马遵恍然大悟道：“非伯约之言，则误中奸计了！”

	 

	姜维于是设计，让马遵假装出城救援，自己领三千精兵埋伏，然后前后夹攻蜀兵。马遵依计行事。赵云见马遵领兵出城，就引军五千来到天水城下，高叫：“我乃常山赵子龙，还不快快开城投降？”城上梁绪大笑：“你中我姜伯约之计，还蒙在鼓里？”赵云正要攻城，忽然喊声大震，四面火光冲天。当先一员少年将军挺枪跃马道：“认识天水姜伯约吗？”赵云挺枪直取姜维，战不数回合，姜维精神倍长。赵云大惊，暗想：“想不到此处有这般人物！”正战时，马遵兵马杀回，赵云首尾不能相顾，冲开条路，引军败走。

	 

	诸葛亮闻讯惊问：“此是何人，能识我计？”有安定人告知诸葛亮，说姜维文武双全，智勇兼备，且事母至孝，是当世英杰。赵云又夸奖姜维枪法与众不同。

	 

	诸葛亮于是亲自提兵至天水城下，商议攻城。当晚半夜，忽然四下火光冲天，喊声震地，四面兵马杀到。诸葛亮由关兴、张苞二将保护杀出重围。回头看时，火光中姜维兵马如一条长蛇，诸葛亮叹道：“兵不在多，在人之调遣。姜维真是将才！”

	 

	诸葛亮得知姜维母亲现在冀城，就派魏延围住冀城，嘱咐魏延将姜维放入。姜维闻讯果然哀告马遵带兵去救母亲。诸葛亮于是叫夏侯楙前去招降姜维。夏侯楙在路上听见百姓说姜维已经献了城池，归降诸葛亮，就往天水来投马遵。当夜，诸葛亮让人假扮姜维攻打天水，火光中难以辨别，于是马遵等皆以为姜维已降蜀。

	 

	诸葛亮于是引兵来攻冀城。城中缺少粮草，姜维在城上，看见蜀兵大小车辆运粮，忍不住领兵前来劫粮。蜀兵见姜维倒弃了粮车，姜维得了粮车正要回城，忽然一支军马拦住，为首蜀将张翼与姜维厮杀一阵，战不数回合，王平引军又到。姜维力穷抵敌不住，夺路回城，城上早插了蜀兵旗号，已被魏延占了。姜维手下只有十余骑，杀条路奔天水城，路上遇到张苞又杀一阵，姜维只剩单枪匹马来到天水城下。马遵命城上乱箭射下，姜维看蜀兵追近，来投上邽城，城上梁绪大骂姜维反贼，乱箭射下。姜维不能辩说，仰天长叹，两眼流泪，拨马往长安而走。

	 

	行不到数里，前面树林茂盛之处一声喊起，关兴引数千兵马拦住去路。姜维人困马乏，不能抵敌，勒回马便走。忽然前面一辆小车从山坡转出。车上之人头戴纶巾，身披鹤氅，手摇羽扇，正是诸葛亮。诸葛亮道：“伯约此时还不投降？”姜维寻思良久，只得下马投降。诸葛亮慌忙下车迎接，握住姜维手说：“我自出茅庐以来，遍求贤者，想传授平生所学，一直未得其人。今日遇到伯约，我愿足矣。”姜维大喜拜谢。

	 

	姜维于是献计，联络城中尹赏、梁绪，取了天水、上邽。夏侯楙与马遵弃城逃窜。诸将问诸葛亮何不去追夏侯楙，诸葛亮笑道：“我放夏侯楙，如放一鸭；今得伯约，得一凤也！”

	 

	诸葛亮得了三城，威声大振。于是整顿兵马，前出祁山，兵临渭水。