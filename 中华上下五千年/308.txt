晋文公、晋襄公之后，晋国王权衰落，国政被一些卿大夫把持。到春秋晚期，晋国政权被赵、魏、韩、范、智、中行氏六家卿大夫控制着，史称“六卿”。后来，范氏、中行氏两家被灭，到晋出公时，晋国只剩智伯瑶、赵襄子、韩康子、魏桓子四家大夫把政，四家中以智氏最强。

	 

	晋出公不甘心当傀儡，秘密地向齐鲁两国借兵，试图除掉四卿。没想到齐、鲁两国不但没借兵，还把这消息告诉了智伯瑶。于是智伯瑶联合另外三卿出兵攻打晋出公，晋出公被迫逃跑，后病死在路上。晋出公死后，在智伯瑶的建议下，宗室姬骄被立为国君，史称晋哀公。

	 

	智伯瑶与晋哀公的父亲有私交，他利用这层关系，影响和操纵哀公，从而控制了晋国的大局。智伯瑶大权独揽，变得越来越骄横跋扈，野心也膨胀起来，不甘于和其他三家分权的现状，想要独吞晋国，一支独大。他的谋臣给他出主意，让他假借晋哀公的名义，向其他三家征地，就说是为与日益强大的越国争夺霸权用的。这样如果他们同意割地，就达到了蚕食他们的目的，如果他们不同意，也可以名正言顺地发兵攻打他们。智伯瑶觉得这个办法很好，马上依计而行。

	 

	韩、赵、魏三家得到征地的通知，知道智伯瑶不怀好意。韩康子本想断然拒绝，但他的家臣段规说，智伯瑶这个人阴险狡诈，刚愎自用，索要不成肯定会发兵攻打，再者，他贪心不足，除了跟韩家，肯定也跟其他家伸手了。不妨等别人拒绝他出兵攻打时，坐收渔利。韩康子觉得这办法可行，便决定先受点损失，伺机而动，因此派使者给智伯送万家之邑。

	 

	智伯见韩康子这么容易就交出了土地，满心喜悦，就等着魏氏也把土地送来。魏桓子当然也不愿意把土地分给智伯瑶。他的谋臣任章跟他分析说，智伯瑶轻易得到土地，一定会更加地骄傲狂妄，不可一世，那时必然轻敌，而失去土地的各家联合起来，对付一个骄傲轻狂的敌人，结果不言自明，因此他建议魏桓子先不要爱惜土地，等形势扭转，智氏失势时再说。于是魏桓子也给智伯瑶送了万家之邑。

	 

	智伯不费吹灰之力就得到两个万家之邑，非常得意，跟赵襄子索要蔡、皋狼之地。赵襄子早就与智伯瑶结怨。当年，智氏率军伐郑，赵襄子还是赵氏世子，进入都城时，赵襄子曾受到智伯瑶的侮辱，赵襄子对他早就怨恨不已。后来，智伯瑶还曾干预赵家家政，企图动摇赵襄子世子之位，赵襄子对他更加愤恨。这次智伯瑶索地，襄子断然拒绝。智伯瑶当即联合韩、魏两家，想以三家的军士一举消灭赵氏。

	 

	赵襄子见形势于己不利，召集众人商议退守，以避敌锋芒，最后选定退守晋阳。赵氏为防备不测，对晋阳经营多年。当初范氏和中行氏支持邯郸叛乱，赵简子就曾退保晋阳。赵简子曾特别嘱咐襄子，如果晋国有难，可以退到晋阳。赵襄子继位后，对晋阳地区的百姓减少赋税，让百姓们得到了好处，赢得了民心。对赵氏来说，这是最为可靠的堡垒。

	 

	赵襄子撤退到晋阳后，发现这里城池非常坚固，储备非常充足，但是他们仓促退兵，没有带够充足的御敌兵器。谋士张孟谈告诉他说，当年晋阳就是为战备而修的，因此修筑宫室选用的材料都是可以用来制造武器的。于是，他们将宫室里的铜柱锯下，制造箭镞和剑戟，用宫室墙垣的材料造箭杆，从而制造了充足的兵器。这下只等与那三家联军开战了。

	 

	公元前454年，智伯瑶率领韩、魏二家攻打晋阳，鏖战三个月都没能攻下，此后围困了一年多，还是未能攻克。眼看着战事拖延，智伯瑶不禁焦急万分。一天，他在城外察看地形，看到晋阳城东北的晋水绕过晋阳城往下流去，突然，他萌生了一个主意：如果改变晋水的水路，把它引到西南边来，不就可以水淹晋阳城了吗？有了主意他赶紧下令兵士们动工，在晋水旁边挖开一条河道，直通晋阳，并在上游筑起水坝拦水。

	 

	不久，雨季来临，上游又有堤坝拦截，晋水被蓄积起来，水位猛涨。智伯瑶见时机已到，下令开坝放水。大水汹涌咆哮着灌向了晋阳城，城里马上变成一片汪洋。老百姓的房子被水冲垮倒塌，生火做饭的灶膛里青蛙跳进跳出，百姓们只好吊起锅子来做饭，后来城中粮食耗尽，竟到了易子而食的地步。尽管如此，百姓们依然支持赵襄子坚守，不肯投降。

	 

	智伯瑶觉得攻破晋阳指日可待，得意地带着魏桓子、韩康子查看水情。智伯瑶对自己的这个计策非常得意，忘乎所以地说：“现在我才知道，水也可以灭亡一个国家。”这话让魏、韩二人心里一惊，马上联想到自己的城池：安邑是魏家的城池，周围有汾水环绕；平阳是韩家的封地，被绛水环绕着。智伯瑶可以用晋水灌晋阳，也可以让汾水灌安邑，绛水灌平阳。两人想到今天的晋阳，很有可能明天就是安邑、平阳，魏桓子的胳膊肘暗地里轻轻地碰了碰韩康子，康子踩了一下桓子的足背回应，二人心照不宣，已经有意反戈一击了。

	 

	智伯瑶正高兴地想着马上就可以攻破晋阳城了，根本没有留意韩、魏两人的轻微举动。但是，他的臣属郄疵注意到韩、魏二君面露忧虑之色，他分析说当初三家约好，攻灭赵氏后平分其土地，现在晋阳将破，二人却一点都不高兴，肯定是顾虑到自己的利益。有了顾虑他们一定会反叛。智伯瑶不相信郄疵的说法，甚至把他的话告诉了魏桓子和韩康子。韩、魏二君当然不会承认，智伯就相信了他们。郄疵为了避祸，请智伯瑶把他派到齐国出使。

	 

	晋阳城形势越来越严峻，赵襄子担心即便是百姓支持，也要守不住了。危难时刻，他与张孟谈谋划，派张孟谈去策反韩、魏二君。张孟谈潜出城外，见到正在犹豫的二君。三人一拍即合，约定里应外合，一起消灭智氏，然后平分智氏的封地。

	 

	赵襄子已经与韩、魏两家达成共识，智伯瑶满心以为很快就要攻破晋阳城了，对此一无所知，仍高枕安眠。第二天夜里，赵襄子派军卒悄悄杀死智伯瑶守堤的士兵，掘开水坝的西侧，晋水反冲向了智伯瑶的军营。军营里当即乱作一团，熟睡中的智伯瑶被混乱声吵醒，这才发现兵营里全是水。他不知是怎么回事，一阵惊慌，这时，四面八方响起喊杀声。赵军从城中杀出，韩、魏二家从两边夹击，已经攻进了智伯瑶的军营里，智军大败，智伯瑶自己也被杀。

	 

	这次战斗结束后，智氏被灭族，赵、魏、韩三家瓜分了智氏的领地。

	 

	公元前403年，韩、赵、魏三家派使者去见周威烈王，要求把他们封为诸侯。

	 

	周天子早已名存实亡，知道就算不同意也没用，反而自己尴尬，不如顺从了他们，于是正式封韩、赵、魏三家为诸侯。“三家分晋”之后，中国历史进入战国时代。春秋五霸之一的晋国灭亡，韩、赵、魏，再加上秦、齐、楚、燕四个大国，形成了历史上的“战国七雄”。